!function(o){"use strict";function e(){n.handleDependency()}var h=wp.customize,n={controls:{},init:function(){var i=this;i.handleDependency(),i.hideEmptySections(),h.state("astra-customizer-tab").bind(e),h.bind("change",function(e,n){i.hasDependentControls(e.id)&&(i.handleDependency(),i.hideEmptySections())})},hasDependentControls:function(t){var a=!1;return o.each(astra.config,function(e,n){if(_.isUndefined(n.conditions)){var i=n[0];if(t==i)return void(a=!0)}else{n=n.conditions;o.each(n,function(e,n){n=n[0];t!=n||(a=!0)})}}),a},handleDependency:function(){var t=this,e=h.get();t.checked_controls={},_.each(e,function(e,n){var i=h.control(n);t.checkControlVisibility(i,n)})},checkControlVisibility:function(e,n){var i,t,a,s,o=h.get();_.isUndefined(e)||void 0!==astra.config[n]&&(t=!(i=!1),s=astra.config[n],a=_.isUndefined(s.conditions)?s:s.conditions,s=_.isUndefined(s.operator)?"AND":s.operator,void 0!==a&&(i=this.checkDependency(a,o,s),t=this.checkContext(n),this.checked_controls[n]=i&&t,i&&t?e.container.removeClass("ast-hide"):e.container.addClass("ast-hide")))},checkContext:function(e){if("undefined"!=typeof AstraBuilderCustomizerData){var n=AstraBuilderCustomizerData.contexts[e];if(void 0!==n){var i=h.state("astra-customizer-tab").get(),e=0;return e<n.length?"ast_selected_tab"===n[e].setting&&n[e].value===i:!0}}return!0},checkDependency:function(e,c,r){var d=this,f=!0,l=!1,n=e[0];if(_.isString(n)){var i=e[1],t=e[2];if(!_.isUndefined(astra.config[n])){var e=_.isUndefined(astra.config[n].conditions)?astra.config[n]:astra.config[n].conditions,a=_.isUndefined(astra.config[n].operator)?"AND":astra.config[n].operator;if(!_.isUndefined(e))if(d.checkDependency(e,c,a)){var s=h.control(n);void 0!==s&&s.container.removeClass("ast-hide")}else if(f=!(l=!0),"AND"==r)return}_.isUndefined(c[n])||l||!f||(s=c[n],f=d.compareValues(s,i,t))}else _.isArray(n)&&(o.each(e,function(e,n){var i=n[0],t=n[1],a=n[2],s=_.isUndefined(c[i])?"":c[i];if(void 0!==astra.config[i]){var o=_.isUndefined(astra.config[i].conditions)?astra.config[i]:astra.config[i].conditions,n=_.isUndefined(astra.config[i].operator)?"AND":astra.config[i].operator;if(!_.isUndefined(o))if(d.checkDependency(o,c,n)){f=!0;i=h.control(i);i&&i.container.removeClass("ast-hide")}else if(f=!1,"AND"==r)return}else f=!0;if(f)if("AND"==r){if(!d.compareValues(s,t,a))return f=!1}else f=!!d.compareValues(s,t,a)&&(l=!0)}),l&&"OR"==r&&(f=!0));return f},hideEmptySections:function(){o("ul.accordion-section.control-section-ast_section").each(function(){var e=o(this).attr("id"),n=!1,i=o(this).find(" > .customize-control");0<i.length&&(i.each(function(){o(this).hasClass("ast-hide")||"none"==o(this).css("display")||(n=!0)}),n?o('.control-section[aria-owns="'+e+'"]').removeClass("ast-hide"):o('.control-section[aria-owns="'+e+'"]').addClass("ast-hide"))})},compareValues:function(e,n,i){var t=!1;switch(n){case"===":t=e===i;break;case">":t=i<e;break;case"<":t=e<i;break;case"<=":t=e<=i;break;case">=":t=i<=e;break;case"!=":t=e!=i;break;case"empty":var a=_.clone(e),t=_.isObject(a)||_.isArray(a)?(_.each(a,function(e,n){_.isEmpty(e)&&delete a[n]}),!!_.isEmpty(a)):!(!_.isNull(a)&&""!=a);break;case"not_empty":a=_.clone(e);(_.isObject(a)||_.isArray(a))&&_.each(a,function(e,n){_.isEmpty(e)&&delete a[n]}),t=!_.isEmpty(a);break;case"contains":_.isArray(e)&&-1!==o.inArray(i,e)&&(t=!0);break;default:t=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(e)&&_.contains(i,e):e==i}return t}};o(function(){window.addEventListener("load",function(){n.init()})})}(jQuery);